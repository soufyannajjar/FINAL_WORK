<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>
        Emotify - Dashboard
    </title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="author" content="" />
    <link rel="stylesheet" href="https://unpkg.com/tailwindcss@2.2.19/dist/tailwind.min.css" />
    <link rel="stylesheet" href="/assets/css/style.css" />
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js">
    </script>
</head>

<body class="leading-normal tracking-normal gradient pt-24 h-screen">
    <%- include('appHeader') %>

    <div class="container mx-auto my-6">
        <% if (error != '') { %>
        <div class="w-full md:mr-2 justify-center p-5 md:mb-0 rounded-lg"
            style="background-color: rgba(255, 255, 255, 0.39);">
            <h1 class="text-xl text-center"><%= error %> </h1>
        </div>
        <% } %>
        <div class="flex flex-nowrap justify-center my-6">

            <div class="w-full md:mr-2 justify-center bg-white p-5 mb-8 md:mb-0 rounded-lg w-4/4 xl:w-1/4 lg:w-3/12 ">
                <h1 class="pt-4 text-2xl text-center"></h1>

                <h1 class="pt-4 text-2xl text-center">WALLET</h1>
                <p class="text-center">Welcome <%= currentUser.firstName + " " + currentUser.lastName %></p>
                <% if(success_msg!= '') { %>
                <p class="text-center green-color"><%=success_msg %> </p>
                <% } %>

                <div class="mb-4 gradient py-8 px-2 text-white text-center rounded">
                    <h1 class="bg-transparent text-3xl"><%= actualWallet %> €</h1>
                </div>
                <p class="text-center"> This money will be paid here:
                    <h1 class="bg-transparent text-center text-2xl"><%= bankNumber %></h1>
                    <form class="mt-2 pb-8 mb-4 bg-white rounded" action="/viewer/updateBankNumber" method="POST">
                        <input required name="bankNumber"
                            class="w-full px-3 py-2 mb-3 text-sm leading-tight text-gray-700 border rounded shadow appearance-none focus:outline-none focus:shadow-outline"
                            id="bankNumber" type="text" placeholder="New Bank Number">
                        <% if(error_msg != '') { %>
                        <p class="text-center text-red-400"><%= error_msg %> </p>
                        <% } %>
                        <div class="text-center">
                            <button id="submitBankNumber" type="submit" class="blue-color text-center justify-center">
                                Change Bank Number</button></div>
                    </form>


                    <hr class="mt-4">
                    <div class="w-full flex">
                        <a href="/viewer/earn"
                            class="mx-auto w-full text-center lg:mx-0 hover:underline gradient text-white font-bold rounded-full my-6 py-4 px-8 shadow-lg focus:outline-none focus:shadow-outline transform transition hover:scale-105 duration-300 ease-in-out">
                            Watch & Earn</a></div>
                    <div style="overflow:scroll; height:30vh; position: relative; ">
                        <% for (let i = 0 ;  i < historyList.length ; i++) { %>
                        <hr>
                        <div class="py-2 flex flex-col w-full">
                            <p class="blue-color font-normal text-base">
                                <%= historyList[i].dateOfPayment.toDateString() %>
                                <% if(historyList[i].earned) { %>
                                (Wallet)
                                <% } %>
                                <% if(!historyList[i].earned) { %>
                                (Bank)
                                <% } %></span>
                                <h1 class="text-2xl">
                                    <% if(historyList[i].earned) { %>
                                    +
                                    <% } %>
                                    <% if(!historyList[i].earned) { %>
                                    -
                                    <% } %>
                                    €<%= historyList[i].salary.toFixed(2) %></h1>
                        </div>

                        <% } %>
                        <% if(historyList.length == 0) { %>
                        <div class="w-full justify-center text-center">
                            <p>You don't have any salary history. If you have money in your wallet, you will be paid as
                                soon as possible.</p>
                        </div>
                        <% } %>
                    </div>
            </div>

            <div class="justify-center bg-white p-5 rounded-lg w-full xl:w-3/4 lg:w-9/12">
                <h1 class="pt-4 text-2xl text-center">MY REVIEWED VIDEOS</h1>
                <div style="overflow:scroll; height:70vh; position: relative;">
                    <div class="gap-4 grid my-8">
                        <% if(!isFilled) { %>
                        <div class="w-full justify-center text-center">

                            <lottie-player src="https://assets5.lottiefiles.com/packages/lf20_ao823ilv.json"
                                background="transparent" speed="1" style="width: 300px; height: 300px; margin: 0 auto;"
                                loop autoplay>
                            </lottie-player>
                            <p class="text-center text-red-400 text-2xl">You don't have video reviews.</p>
                            <p>1. Click on "Watch & Earn"</p>
                            <p>2. Put your webcam/camera in front of you, your face must be visible.</p>
                            <p>3. Watch the videos</p>
                            <p>4. Answer to a few questions</p>
                            <p>5. Earn money !</p>
                        </div>
                        <% } %>

                        <% for (let i = 0 ;  i < videos.length ; i++) { %>

                        <div class="w-full rounded-md shadow-md border-2 shadow-gray-200 flex">
                            <div class="p-4 flex flex-col w-full">
                                <p class="text-blue-600 font-normal text-base"><%= videos[i].audienceMinAge %> -
                                    <%= videos[i].audienceMaxAge %> Year</span>
                                    <h1 class="text-3xl py-2"><%= videos[i].title %></h1>
                                    <p class="flex-1 font-light text-gray-700 text-justify line-clamp-3">
                                        <%= videos[i].description %></p>
                                    <br>
                                    <hr>
                                    <br>
                                    <div id="emotions">
                                        <h1 class="text-2xl">Emotions</h1>
                                    </div>
                                    <div class="gap-4 grid mb-8 grid-cols-2 select-none">

                                        <div class="test text-center justify-center">

                                            <div class="flex"> <img class="justify-center"
                                                    src="/assets/images/smileys/happy1.jfif"
                                                    style="width: 25px;height: 25px;">
                                                <h4 class="px-2" id="happy">Happy <%= videos[i].happy +"%"%></h4>
                                            </div>



                                            <div class="progress border-2 rounded-full">
                                                <div class="progress-bar gradient border-full rounded-full h-2 w-0"
                                                    role="progressbar" aria-valuenow="70" aria-valuemin="0"
                                                    aria-valuemax="100" id="happy_progress"
                                                    style="width: <%= videos[i].happy +"%;"%>">
                                                    <span class="sr-only"></span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="test ">
                                            <div class="flex"> <img src="/assets/images/smileys/sad.jfif"
                                                    style="width: 25px;height: 25px;">
                                                <h4 class="px-2" id="sad">Sad <%= videos[i].sad +"%"%></h4>
                                            </div>
                                            <div class="progress border-2 rounded-full">
                                                <div class="progress-bar gradient border-full rounded-full h-2 w-0"
                                                    role="progressbar" aria-valuenow="70" aria-valuemin="0"
                                                    aria-valuemax="100" id="sad_progress"
                                                    style="width: <%= videos[i].sad +"%;"%>">
                                                    <span class="sr-only"></span>
                                                </div>
                                            </div>
                                        </div>


                                        <div class="test ">
                                            <div class="flex"> <img src="/assets/images/smileys/nuetral.jfif"
                                                    style="width: 25px;height: 25px;">
                                                <h4 class="px-2" id="neutral">Neutral <%= videos[i].neutral +"%"%></h4>
                                            </div>
                                            <div class="progress border-2 rounded-full">
                                                <div class="progress-bar gradient border-full rounded-full h-2 w-0"
                                                    role="progressbar" aria-valuenow="70" aria-valuemin="0"
                                                    aria-valuemax="100" id="neutral_progress"
                                                    style="width: <%= videos[i].neutral +"%;"%>">
                                                    <span class="sr-only"></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="test ">
                                            <div class="flex"> <img src="/assets/images/smileys/dusgusted.jfif"
                                                    style="height: 25px;width: 25px;">
                                                <h4 class="px-2" id="disgusted">Disgusted <%= videos[i].disgusted +"%"%>
                                                </h4>
                                            </div>
                                            <div class="progress border-2 rounded-full">
                                                <div class="progress-bar gradient border-full rounded-full h-2 w-0"
                                                    role="progressbar" aria-valuenow="70" aria-valuemin="0"
                                                    aria-valuemax="100" id="disgusted_progress"
                                                    style="width: <%= videos[i].disgusted +"%;"%>">
                                                    <span class="sr-only"></span>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="test ">
                                            <div class="flex"> <img src="/assets/images/smileys/angry.jfif"
                                                    style="width: 25px;height: 25px;">
                                                <h4 class="px-2" id="angry">Angry <%= videos[i].angry +"%"%></h4>
                                            </div>
                                            <div class="progress border-2 rounded-full">
                                                <div class="progress-bar gradient border-full rounded-full h-2 w-0"
                                                    role="progressbar" aria-valuenow="70" aria-valuemin="0"
                                                    aria-valuemax="100" id="angry_progress"
                                                    style="width: <%= videos[i].angry +"%;"%>">

                                                </div>
                                            </div>
                                        </div>

                                        <div class="test ">
                                            <div class="flex"> <img src="/assets/images/smileys/surprised.jfif"
                                                    style="width: 25px;height: 25px;">
                                                <h4 class="px-2" id="surprised">Surprised <%= videos[i].surprised +"%"%>
                                                </h4>
                                            </div>
                                            <div class="progress border-2 rounded-full">
                                                <div class="progress-bar gradient border-full rounded-full h-2 w-0"
                                                    role="progressbar" aria-valuenow="70" aria-valuemin="0"
                                                    aria-valuemax="100" id="surprised_progress"
                                                    style="width: <%= videos[i].surprised +"%;"%>">
                                                    <span class="sr-only"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <hr>
                                    <div id="questions" class="mt-4">
                                        <h1 class="text-2xl">Questions</h1>
                                        <p class="text-grey-darkest font-thin ">
                                            1. What did you think of this commercial in general?
                                        </p>
                                        <li class="pb-2 mb-2">
                                            <%= videos[i].Q_general %>
                                        </li>
                                        <p class="text-grey-darkest font-thin ">
                                            2. Were you triggered to perform an action?
                                        </p>
                                        <li class="pb-2 mb-2">
                                            <%= videos[i].Q_triggered +"/5" %>
                                        </li>
                                        <p class="text-grey-darkest font-thin ">
                                            3. Do you think this commercial will appeal to the target group? Why or why
                                            not?
                                        </p>
                                        <li class="pb-2 mb-2">
                                            <%= videos[i].Q_appeal %>
                                        </li>
                                    </div>
                                    <br>

                            </div>
                        </div>
                        <hr class="my-4"><% } %>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

</body>

</html>